
<!DOCTYPE html>


<html lang="en" data-content_root="./" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Dynamic Time Wrapping &#8212; Welcome to Nuril Anjar Jupyter Book</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="_static/styles/sphinx-book-theme.css?v=eba8b062" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.8ecb98da25f57f5357bf6f572d296f466b2cfe2517ffebfabe82451661e28f02.css?v=6644e6bb" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="_static/copybutton.js?v=f281be69"></script>
    <script src="_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'Time_Wrapping';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Membaca dataset suara" href="voicepredict.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="_static/anjar.jpg" class="logo__image only-light" alt="Welcome to Nuril Anjar Jupyter Book - Home"/>
    <script>document.write(`<img src="_static/anjar.jpg" class="logo__image only-dark" alt="Welcome to Nuril Anjar Jupyter Book - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="intro.html">
                    Welcome to Nuril Anjar Jupyter Book
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="Eksplorasi.html">Tugas 1 Eksplorasi Menggunakan Power BI</a></li>




<li class="toctree-l1 has-children"><a class="reference internal" href="Transformasi.html">TUGAS 2 TRANSFORMASI DATA</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="Deteksi_anomali.html">Preprocessing Penghapusan outlier</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="Penyeimbangan_Dataset.html">Penyeimbangan dataset (SMOTE, ADASYN)</a></li>








<li class="toctree-l1"><a class="reference internal" href="Timeseries.html">Dataset Deret Waktu untuk Prediksi</a></li>





<li class="toctree-l1"><a class="reference internal" href="deployno.html">DEPLOY SISTEM TIMESERIES NO2</a></li>






<li class="toctree-l1"><a class="reference internal" href="voicepredict.html">Membaca dataset suara</a></li>






<li class="toctree-l1 current active"><a class="current reference internal" href="#">Dynamic Time Wrapping</a></li>






</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/executablebooks/jupyter-book" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/executablebooks/jupyter-book/issues/new?title=Issue%20on%20page%20%2FTime_Wrapping.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/Time_Wrapping.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Dynamic Time Wrapping</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">Dynamic Time Wrapping</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#inisialisasi-konfigurasi-untuk-perhitungan-dtw-pada-rekaman-audio">Inisialisasi Konfigurasi untuk Perhitungan DTW pada Rekaman Audio</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#fungsi-ekstraksi-mfcc-dan-perhitungan-dtw">Fungsi Ekstraksi MFCC dan Perhitungan DTW</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#pengumpulan-dan-persiapan-data-rekaman-lama">Pengumpulan dan Persiapan Data Rekaman Lama</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#proses-perhitungan-dtw-untuk-membandingkan-rekaman-baru-dan-lama">Proses Perhitungan DTW untuk Membandingkan Rekaman Baru dan Lama</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#analisis-kemiripan-rekaman-baru-terhadap-data-lama">Analisis Kemiripan Rekaman Baru terhadap Data Lama</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#visualisasi-hasil-analisis-dtw">Visualisasi Hasil Analisis DTW</a></li>
</ul>

            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="dynamic-time-wrapping">
<h1>Dynamic Time Wrapping<a class="headerlink" href="#dynamic-time-wrapping" title="Link to this heading">#</a></h1>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="inisialisasi-konfigurasi-untuk-perhitungan-dtw-pada-rekaman-audio">
<h1>Inisialisasi Konfigurasi untuk Perhitungan DTW pada Rekaman Audio<a class="headerlink" href="#inisialisasi-konfigurasi-untuk-perhitungan-dtw-pada-rekaman-audio" title="Link to this heading">#</a></h1>
<p>Kode tersebut melakukan penyiapan awal untuk proses perhitungan Dynamic Time Warping (DTW) antara rekaman lama dan rekaman baru. Pertama, ditetapkan nilai sampling rate (SR = 22050) serta jumlah koefisien MFCC (N_MFCC = 13) yang digunakan dalam ekstraksi fitur audio. Variabel BASE_DIR menunjuk pada direktori utama penyimpanan data, sedangkan OLD_DIRS berisi path dua kategori rekaman lama, yaitu folder buka dan tutup. Variabel NEW_FILES memuat lokasi dua rekaman audio baru, yaitu bukabaru.wav dan tutupbaru.wav, yang akan dibandingkan dengan data lama. Sementara itu, OUT_CSV menentukan nama file keluaran yang menyimpan seluruh hasil komputasi DTW dalam bentuk CSV. Secara keseluruhan, kode ini berfungsi sebagai langkah awal sebelum melakukan ekstraksi MFCC, penghitungan DTW, serta analisis lanjutan.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">os</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">librosa</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">glob</span><span class="w"> </span><span class="kn">import</span> <span class="n">glob</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">tqdm</span><span class="w"> </span><span class="kn">import</span> <span class="n">tqdm</span>

<span class="n">SR</span> <span class="o">=</span> <span class="mi">22050</span>
<span class="n">N_MFCC</span> <span class="o">=</span> <span class="mi">13</span>

<span class="c1"># Sesuaikan dengan path hasil ekstraksi ZIP</span>
<span class="n">BASE_DIR</span> <span class="o">=</span> <span class="s1">&#39;/mnt/data/user1_unzipped/user1&#39;</span>

<span class="n">OLD_DIRS</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;buka&#39;</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">BASE_DIR</span><span class="p">,</span> <span class="s1">&#39;buka&#39;</span><span class="p">),</span>
    <span class="s1">&#39;tutup&#39;</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">BASE_DIR</span><span class="p">,</span> <span class="s1">&#39;tutup&#39;</span><span class="p">),</span>
<span class="p">}</span>

<span class="c1"># Jika nantinya kamu ingin menggabungkan file audio buka/tutup jadi 1 file</span>
<span class="n">NEW_FILES</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;buka_baru&#39;</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">BASE_DIR</span><span class="p">,</span> <span class="s1">&#39;bukabaru.wav&#39;</span><span class="p">),</span>
    <span class="s1">&#39;tutup_baru&#39;</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">BASE_DIR</span><span class="p">,</span> <span class="s1">&#39;tutupbaru.wav&#39;</span><span class="p">),</span>
<span class="p">}</span>

<span class="n">OUT_CSV</span> <span class="o">=</span> <span class="s1">&#39;dtw_results.csv&#39;</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">ModuleNotFoundError</span><span class="g g-Whitespace">                       </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">line</span> <span class="mi">2</span>
<span class="g g-Whitespace">      </span><span class="mi">1</span> <span class="kn">import</span><span class="w"> </span><span class="nn">os</span>
<span class="ne">----&gt; </span><span class="mi">2</span> <span class="kn">import</span><span class="w"> </span><span class="nn">librosa</span>
<span class="g g-Whitespace">      </span><span class="mi">3</span> <span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="g g-Whitespace">      </span><span class="mi">4</span> <span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>

<span class="ne">ModuleNotFoundError</span>: No module named &#39;librosa&#39;
</pre></div>
</div>
</div>
</div>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="fungsi-ekstraksi-mfcc-dan-perhitungan-dtw">
<h1>Fungsi Ekstraksi MFCC dan Perhitungan DTW<a class="headerlink" href="#fungsi-ekstraksi-mfcc-dan-perhitungan-dtw" title="Link to this heading">#</a></h1>
<p>Fungsi extract_mfcc dan dtw_distance digunakan untuk memproses serta membandingkan sinyal audio melalui representasi fitur MFCC. Fungsi extract_mfcc menerima path file audio, memuat sinyal dengan sampling rate tertentu, kemudian menghasilkan Mel-Frequency Cepstral Coefficients (MFCC) sebanyak n_mfcc, yang menggambarkan karakteristik spektral suara secara ringkas. Sementara itu, fungsi dtw_distance menghitung jarak antara dua matriks MFCC menggunakan algoritma Dynamic Time Warping (DTW), yang menyesuaikan perbedaan waktu agar kedua sinyal dapat dibandingkan secara sebanding. Fungsi tersebut menghasilkan tiga keluaran: raw (biaya DTW keseluruhan), norm (biaya yang telah dinormalisasi terhadap panjang jalur untuk mengatasi variasi durasi), dan path_len (jumlah langkah pada jalur optimal). Nilai-nilai ini memberikan dasar untuk menganalisis tingkat kemiripan atau perbedaan antara dua rekaman audio.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">extract_mfcc</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">SR</span><span class="p">,</span> <span class="n">n_mfcc</span><span class="o">=</span><span class="n">N_MFCC</span><span class="p">):</span>
    <span class="c1"># Fungsi ini otomatis membaca file .wav dari folder:</span>
    <span class="c1"># /mnt/data/user1_unzipped/user1/buka</span>
    <span class="c1"># /mnt/data/user1_unzipped/user1/tutup</span>
    <span class="n">y</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">,</span> <span class="n">mono</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">mfcc</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">feature</span><span class="o">.</span><span class="n">mfcc</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">,</span> <span class="n">n_mfcc</span><span class="o">=</span><span class="n">n_mfcc</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">mfcc</span>


<span class="k">def</span><span class="w"> </span><span class="nf">dtw_distance</span><span class="p">(</span><span class="n">m1</span><span class="p">,</span> <span class="n">m2</span><span class="p">,</span> <span class="n">metric</span><span class="o">=</span><span class="s1">&#39;euclidean&#39;</span><span class="p">):</span>
    <span class="c1"># Hitung DTW antara 2 MFCC</span>
    <span class="n">D</span><span class="p">,</span> <span class="n">wp</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">sequence</span><span class="o">.</span><span class="n">dtw</span><span class="p">(</span><span class="n">X</span><span class="o">=</span><span class="n">m1</span><span class="p">,</span> <span class="n">Y</span><span class="o">=</span><span class="n">m2</span><span class="p">,</span> <span class="n">metric</span><span class="o">=</span><span class="n">metric</span><span class="p">)</span>

    <span class="n">raw</span> <span class="o">=</span> <span class="n">D</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">]</span>     <span class="c1"># total cost DTW</span>
    <span class="n">path_len</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">wp</span><span class="p">)</span>  <span class="c1"># panjang rute DTW</span>
    <span class="n">norm</span> <span class="o">=</span> <span class="n">raw</span> <span class="o">/</span> <span class="n">path_len</span> <span class="k">if</span> <span class="n">path_len</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="n">np</span><span class="o">.</span><span class="n">inf</span>  <span class="c1"># normalisasi DTW</span>

    <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="n">raw</span><span class="p">),</span> <span class="nb">float</span><span class="p">(</span><span class="n">norm</span><span class="p">),</span> <span class="nb">int</span><span class="p">(</span><span class="n">path_len</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="pengumpulan-dan-persiapan-data-rekaman-lama">
<h1>Pengumpulan dan Persiapan Data Rekaman Lama<a class="headerlink" href="#pengumpulan-dan-persiapan-data-rekaman-lama" title="Link to this heading">#</a></h1>
<p>Bagian kode ini bertugas menyiapkan seluruh data rekaman lama sebelum proses analisis kesamaan suara dilakukan menggunakan fitur MFCC. Pertama, direktori utama (BASE) beserta folder berisi rekaman lama (OLD_DIRS untuk kategori buka dan tutup) didefinisikan, sementara daftar NEW_FILES disiapkan untuk memuat rekaman baru yang akan dibandingkan. Nilai sampling rate (SR = 16000) dan jumlah koefisien MFCC (N_MFCC = 20) ditetapkan sebagai konfigurasi ekstraksi fitur. Selanjutnya, script mencari seluruh file WAV di setiap folder lama, memverifikasi keberadaan direktori, dan menampilkan jumlah file di masing-masing kategori. MFCC dari setiap rekaman kemudian diekstraksi melalui fungsi extract_mfcc dan disimpan dalam dictionary old_mfcc. Jika rekaman baru tersedia, fitur MFCC-nya juga dapat diolah dan disimpan ke dalam new_mfcc. Secara keseluruhan, kode ini mempersiapkan data audio dalam bentuk representasi numerik sehingga siap digunakan dalam tahap analisis atau perbandingan lebih lanjut, seperti menggunakan algoritma DTW.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">os</span>

<span class="k">def</span><span class="w"> </span><span class="nf">walk_all</span><span class="p">(</span><span class="n">root</span><span class="o">=</span><span class="s2">&quot;/mnt/data&quot;</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">path</span><span class="p">,</span> <span class="n">dirs</span><span class="p">,</span> <span class="n">files</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">walk</span><span class="p">(</span><span class="n">root</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;PATH :&quot;</span><span class="p">,</span> <span class="n">path</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; DIRS:&quot;</span><span class="p">,</span> <span class="n">dirs</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; FILES:&quot;</span><span class="p">,</span> <span class="n">files</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;-&quot;</span> <span class="o">*</span> <span class="mi">60</span><span class="p">)</span>


<span class="n">walk_all</span><span class="p">(</span><span class="s2">&quot;/mnt/data/user1_unzipped/user1&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="s2">&quot;/mnt&quot;</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[]
[&#39;opt&#39;, &#39;libx32&#39;, &#39;tmp&#39;, &#39;proc&#39;, &#39;dev&#39;, &#39;bin&#39;, &#39;mnt&#39;, &#39;root&#39;, &#39;srv&#39;, &#39;home&#39;, &#39;var&#39;, &#39;etc&#39;, &#39;sbin&#39;, &#39;usr&#39;, &#39;boot&#39;, &#39;sys&#39;, &#39;lib32&#39;, &#39;lib64&#39;, &#39;media&#39;, &#39;lib&#39;, &#39;run&#39;, &#39;kaggle&#39;, &#39;.dockerenv&#39;, &#39;datalab&#39;, &#39;tools&#39;, &#39;content&#39;, &#39;python-apt&#39;, &#39;python-apt.tar.xz&#39;, &#39;NGC-DL-CONTAINER-LICENSE&#39;, &#39;cuda-keyring_1.1-1_all.deb&#39;]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">google.colab</span><span class="w"> </span><span class="kn">import</span> <span class="n">files</span>
<span class="n">uploaded</span> <span class="o">=</span> <span class="n">files</span><span class="o">.</span><span class="n">upload</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
     <input type="file" id="files-d11e0558-de71-4b32-bfea-7c0fe42e006e" name="files[]" multiple disabled
        style="border:none" />
     <output id="result-d11e0558-de71-4b32-bfea-7c0fe42e006e">
      Upload widget is only available when the cell has been executed in the
      current browser session. Please rerun this cell to enable.
      </output>
      <script>// Copyright 2017 Google LLC
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//      http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.

/**
 * @fileoverview Helpers for google.colab Python module.
 */
(function(scope) {
function span(text, styleAttributes = {}) {
  const element = document.createElement('span');
  element.textContent = text;
  for (const key of Object.keys(styleAttributes)) {
    element.style[key] = styleAttributes[key];
  }
  return element;
}

// Max number of bytes which will be uploaded at a time.
const MAX_PAYLOAD_SIZE = 100 * 1024;

function _uploadFiles(inputId, outputId) {
  const steps = uploadFilesStep(inputId, outputId);
  const outputElement = document.getElementById(outputId);
  // Cache steps on the outputElement to make it available for the next call
  // to uploadFilesContinue from Python.
  outputElement.steps = steps;

  return _uploadFilesContinue(outputId);
}

// This is roughly an async generator (not supported in the browser yet),
// where there are multiple asynchronous steps and the Python side is going
// to poll for completion of each step.
// This uses a Promise to block the python side on completion of each step,
// then passes the result of the previous step as the input to the next step.
function _uploadFilesContinue(outputId) {
  const outputElement = document.getElementById(outputId);
  const steps = outputElement.steps;

  const next = steps.next(outputElement.lastPromiseValue);
  return Promise.resolve(next.value.promise).then((value) => {
    // Cache the last promise value to make it available to the next
    // step of the generator.
    outputElement.lastPromiseValue = value;
    return next.value.response;
  });
}

/**
 * Generator function which is called between each async step of the upload
 * process.
 * @param {string} inputId Element ID of the input file picker element.
 * @param {string} outputId Element ID of the output display.
 * @return {!Iterable<!Object>} Iterable of next steps.
 */
function* uploadFilesStep(inputId, outputId) {
  const inputElement = document.getElementById(inputId);
  inputElement.disabled = false;

  const outputElement = document.getElementById(outputId);
  outputElement.innerHTML = '';

  const pickedPromise = new Promise((resolve) => {
    inputElement.addEventListener('change', (e) => {
      resolve(e.target.files);
    });
  });

  const cancel = document.createElement('button');
  inputElement.parentElement.appendChild(cancel);
  cancel.textContent = 'Cancel upload';
  const cancelPromise = new Promise((resolve) => {
    cancel.onclick = () => {
      resolve(null);
    };
  });

  // Wait for the user to pick the files.
  const files = yield {
    promise: Promise.race([pickedPromise, cancelPromise]),
    response: {
      action: 'starting',
    }
  };

  cancel.remove();

  // Disable the input element since further picks are not allowed.
  inputElement.disabled = true;

  if (!files) {
    return {
      response: {
        action: 'complete',
      }
    };
  }

  for (const file of files) {
    const li = document.createElement('li');
    li.append(span(file.name, {fontWeight: 'bold'}));
    li.append(span(
        `(${file.type || 'n/a'}) - ${file.size} bytes, ` +
        `last modified: ${
            file.lastModifiedDate ? file.lastModifiedDate.toLocaleDateString() :
                                    'n/a'} - `));
    const percent = span('0% done');
    li.appendChild(percent);

    outputElement.appendChild(li);

    const fileDataPromise = new Promise((resolve) => {
      const reader = new FileReader();
      reader.onload = (e) => {
        resolve(e.target.result);
      };
      reader.readAsArrayBuffer(file);
    });
    // Wait for the data to be ready.
    let fileData = yield {
      promise: fileDataPromise,
      response: {
        action: 'continue',
      }
    };

    // Use a chunked sending to avoid message size limits. See b/62115660.
    let position = 0;
    do {
      const length = Math.min(fileData.byteLength - position, MAX_PAYLOAD_SIZE);
      const chunk = new Uint8Array(fileData, position, length);
      position += length;

      const base64 = btoa(String.fromCharCode.apply(null, chunk));
      yield {
        response: {
          action: 'append',
          file: file.name,
          data: base64,
        },
      };

      let percentDone = fileData.byteLength === 0 ?
          100 :
          Math.round((position / fileData.byteLength) * 100);
      percent.textContent = `${percentDone}% done`;

    } while (position < fileData.byteLength);
  }

  // All done.
  yield {
    response: {
      action: 'complete',
    }
  };
}

scope.google = scope.google || {};
scope.google.colab = scope.google.colab || {};
scope.google.colab._files = {
  _uploadFiles,
  _uploadFilesContinue,
};
})(self);
</script> </div><div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Saving user1.zip to user1.zip
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">os</span>
<span class="nb">print</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;.config&#39;, &#39;user1.zip&#39;, &#39;sample_data&#39;]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">zipfile</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">os</span>

<span class="c1"># ====================================</span>
<span class="c1"># ZIP yang kamu upload (nama otomatis)</span>
<span class="c1"># ====================================</span>
<span class="n">zip_files</span> <span class="o">=</span> <span class="p">[</span><span class="n">f</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">()</span> <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.zip&quot;</span><span class="p">)]</span>

<span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">zip_files</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
    <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span><span class="s2">&quot;Tidak ada file ZIP di directory!&quot;</span><span class="p">)</span>

<span class="n">zip_path</span> <span class="o">=</span> <span class="n">zip_files</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>  <span class="c1"># pakai file ZIP pertama yang ditemukan</span>
<span class="n">extract_path</span> <span class="o">=</span> <span class="s2">&quot;rekamsuara&quot;</span>

<span class="c1"># Ekstrak ZIP</span>
<span class="k">with</span> <span class="n">zipfile</span><span class="o">.</span><span class="n">ZipFile</span><span class="p">(</span><span class="n">zip_path</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">z</span><span class="p">:</span>
    <span class="n">z</span><span class="o">.</span><span class="n">extractall</span><span class="p">(</span><span class="n">extract_path</span><span class="p">)</span>

<span class="c1"># Cek hasil ekstraksi</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;ZIP ditemukan:&quot;</span><span class="p">,</span> <span class="n">zip_path</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Isi folder rekamsuara:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">extract_path</span><span class="p">))</span>

<span class="c1"># Cek folder &#39;user1&#39;</span>
<span class="n">user1_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">extract_path</span><span class="p">,</span> <span class="s2">&quot;user1&quot;</span><span class="p">)</span>

<span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">user1_path</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Isi folder rekamsuara/user1:&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">user1_path</span><span class="p">))</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Tidak ada folder &#39;user1&#39; di dalam rekamsuara.&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>ZIP ditemukan: user1.zip
Isi folder rekamsuara:
[&#39;user1&#39;]

Isi folder rekamsuara/user1:
[&#39;buka&#39;, &#39;tutup&#39;]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">path</span><span class="p">,</span> <span class="n">dirs</span><span class="p">,</span> <span class="n">files</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">walk</span><span class="p">(</span><span class="s2">&quot;rekamsuara&quot;</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;PATH :&quot;</span><span class="p">,</span> <span class="n">path</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;DIRS :&quot;</span><span class="p">,</span> <span class="n">dirs</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;FILES:&quot;</span><span class="p">,</span> <span class="n">files</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;-&quot;</span> <span class="o">*</span> <span class="mi">50</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>PATH : rekamsuara
DIRS : [&#39;user1&#39;]
FILES: []
--------------------------------------------------
PATH : rekamsuara/user1
DIRS : [&#39;buka&#39;, &#39;tutup&#39;]
FILES: []
--------------------------------------------------
PATH : rekamsuara/user1/buka
DIRS : []
FILES: [&#39;07-11-2025 11.57(3).wav&#39;, &#39;07-11-2025 11.46.wav&#39;, &#39;07-11-2025 11.56.wav&#39;, &#39;07-11-2025 11.51(3).wav&#39;, &#39;07-11-2025 11.48.wav&#39;, &#39;07-11-2025 11.57(9).wav&#39;, &#39;07-11-2025 11.50(6).wav&#39;, &#39;07-11-2025 11.55(8).wav&#39;, &#39;07-11-2025 11.55(3).wav&#39;, &#39;07-11-2025 11.52(2).wav&#39;, &#39;07-11-2025 11.47.wav&#39;, &#39;07-11-2025 11.57(7).wav&#39;, &#39;07-11-2025 11.49.wav&#39;, &#39;07-11-2025 11.49(4).wav&#39;, &#39;07-11-2025 11.50(7).wav&#39;, &#39;07-11-2025 11.56(2).wav&#39;, &#39;07-11-2025 11.58(5).wav&#39;, &#39;07-11-2025 11.51(2).wav&#39;, &#39;07-11-2025 11.47(4).wav&#39;, &#39;07-11-2025 11.57(2).wav&#39;, &#39;07-11-2025 11.53(9).wav&#39;, &#39;07-11-2025 11.58(4).wav&#39;, &#39;07-11-2025 11.49(5).wav&#39;, &#39;07-11-2025 11.52(7).wav&#39;, &#39;07-11-2025 11.51(7).wav&#39;, &#39;07-11-2025 11.52(11).wav&#39;, &#39;07-11-2025 11.57(4).wav&#39;, &#39;07-11-2025 11.51(4).wav&#39;, &#39;07-11-2025 11.51.wav&#39;, &#39;07-11-2025 11.50(4).wav&#39;, &#39;07-11-2025 11.52.wav&#39;, &#39;07-11-2025 11.55(2).wav&#39;, &#39;07-11-2025 11.57(11).wav&#39;, &#39;07-11-2025 11.53.wav&#39;, &#39;07-11-2025 11.54(8).wav&#39;, &#39;07-11-2025 11.52(6).wav&#39;, &#39;07-11-2025 11.55(6).wav&#39;, &#39;07-11-2025 11.56(11).wav&#39;, &#39;07-11-2025 11.51(5).wav&#39;, &#39;07-11-2025 11.52(10).wav&#39;, &#39;07-11-2025 11.52(5).wav&#39;, &#39;07-11-2025 11.58(3).wav&#39;, &#39;07-11-2025 11.53(8).wav&#39;, &#39;07-11-2025 11.50(2).wav&#39;, &#39;07-11-2025 11.54.wav&#39;, &#39;07-11-2025 11.51(10).wav&#39;, &#39;07-11-2025 11.58.wav&#39;, &#39;07-11-2025 11.49(3).wav&#39;, &#39;07-11-2025 11.52(9).wav&#39;, &#39;07-11-2025 11.53(10).wav&#39;, &#39;07-11-2025 11.55(4).wav&#39;, &#39;07-11-2025 11.56(10).wav&#39;, &#39;07-11-2025 11.54(4).wav&#39;, &#39;07-11-2025 11.54(3).wav&#39;, &#39;07-11-2025 11.51(6).wav&#39;, &#39;07-11-2025 11.57(10).wav&#39;, &#39;07-11-2025 11.46(2).wav&#39;, &#39;07-11-2025 11.53(6).wav&#39;, &#39;07-11-2025 11.52(3).wav&#39;, &#39;07-11-2025 11.53(2).wav&#39;, &#39;07-11-2025 11.53(3).wav&#39;, &#39;07-11-2025 11.50(3).wav&#39;, &#39;07-11-2025 11.56(9).wav&#39;, &#39;07-11-2025 11.56(3).wav&#39;, &#39;07-11-2025 11.50(8).wav&#39;, &#39;07-11-2025 11.51(9).wav&#39;, &#39;07-11-2025 11.51(11).wav&#39;, &#39;07-11-2025 11.47(2).wav&#39;, &#39;Jum 11.47(3).wav&#39;, &#39;07-11-2025 11.53(5).wav&#39;, &#39;07-11-2025 11.57(6).wav&#39;, &#39;07-11-2025 11.56(4).wav&#39;, &#39;07-11-2025 11.54(6).wav&#39;, &#39;07-11-2025 11.57(8).wav&#39;, &#39;07-11-2025 11.56(6).wav&#39;, &#39;07-11-2025 11.55(5).wav&#39;, &#39;07-11-2025 11.55(7).wav&#39;, &#39;07-11-2025 11.48(2).wav&#39;, &#39;07-11-2025 11.49(2).wav&#39;, &#39;07-11-2025 11.54(5).wav&#39;, &#39;07-11-2025 11.54(9).wav&#39;, &#39;07-11-2025 11.58(2).wav&#39;, &#39;07-11-2025 11.51(8).wav&#39;, &#39;07-11-2025 11.56(5).wav&#39;, &#39;07-11-2025 11.57(5).wav&#39;, &#39;07-11-2025 11.56(7).wav&#39;, &#39;07-11-2025 11.52(8).wav&#39;, &#39;07-11-2025 11.47(3).wav&#39;, &#39;07-11-2025 11.54(10).wav&#39;, &#39;07-11-2025 11.53(4).wav&#39;, &#39;07-11-2025 11.57.wav&#39;, &#39;07-11-2025 11.53(7).wav&#39;, &#39;07-11-2025 11.55.wav&#39;, &#39;07-11-2025 11.54(2).wav&#39;, &#39;07-11-2025 11.50(5).wav&#39;, &#39;07-11-2025 11.50.wav&#39;, &#39;07-11-2025 11.54(7).wav&#39;, &#39;07-11-2025 11.52(4).wav&#39;, &#39;07-11-2025 11.46(3).wav&#39;, &#39;07-11-2025 11.56(8).wav&#39;]
--------------------------------------------------
PATH : rekamsuara/user1/tutup
DIRS : []
FILES: [&#39;07-11-2025 12.04(7).wav&#39;, &#39;07-11-2025 12.11(7).wav&#39;, &#39;07-11-2025 12.04(9).wav&#39;, &#39;07-11-2025 12.25.wav&#39;, &#39;07-11-2025 12.25(2).wav&#39;, &#39;07-11-2025 12.02(8).wav&#39;, &#39;07-11-2025 12.05(4).wav&#39;, &#39;07-11-2025 12.06(6).wav&#39;, &#39;07-11-2025 12.02.wav&#39;, &#39;07-11-2025 12.09(2).wav&#39;, &#39;07-11-2025 12.11.wav&#39;, &#39;07-11-2025 12.02(7).wav&#39;, &#39;07-11-2025 12.26(5).wav&#39;, &#39;07-11-2025 12.29(2).wav&#39;, &#39;07-11-2025 12.07(3).wav&#39;, &#39;07-11-2025 12.12(6).wav&#39;, &#39;07-11-2025 12.04(8).wav&#39;, &#39;07-11-2025 12.06(9).wav&#39;, &#39;07-11-2025 12.03(4).wav&#39;, &#39;07-11-2025 12.10(2).wav&#39;, &#39;07-11-2025 12.28(5).wav&#39;, &#39;07-11-2025 12.27(6).wav&#39;, &#39;07-11-2025 12.04(5).wav&#39;, &#39;07-11-2025 12.25(5).wav&#39;, &#39;07-11-2025 12.25(3).wav&#39;, &#39;07-11-2025 12.28(3).wav&#39;, &#39;07-11-2025 12.27(7).wav&#39;, &#39;07-11-2025 12.06(7).wav&#39;, &#39;07-11-2025 12.05(10).wav&#39;, &#39;07-11-2025 12.06(10).wav&#39;, &#39;07-11-2025 12.03(7).wav&#39;, &#39;07-11-2025 12.03(10).wav&#39;, &#39;07-11-2025 12.03(11).wav&#39;, &#39;07-11-2025 12.27.wav&#39;, &#39;07-11-2025 12.05(6).wav&#39;, &#39;07-11-2025 12.04(10).wav&#39;, &#39;07-11-2025 12.11(6).wav&#39;, &#39;07-11-2025 12.25(7).wav&#39;, &#39;07-11-2025 12.27(4).wav&#39;, &#39;07-11-2025 12.05(3).wav&#39;, &#39;07-11-2025 12.05(2).wav&#39;, &#39;07-11-2025 12.03.wav&#39;, &#39;07-11-2025 12.04.wav&#39;, &#39;07-11-2025 12.05.wav&#39;, &#39;07-11-2025 12.11(5).wav&#39;, &#39;07-11-2025 12.26.wav&#39;, &#39;07-11-2025 12.05(7).wav&#39;, &#39;07-11-2025 12.03(6).wav&#39;, &#39;07-11-2025 12.05(9).wav&#39;, &#39;07-11-2025 12.27(5).wav&#39;, &#39;07-11-2025 12.06(2).wav&#39;, &#39;07-11-2025 12.04(4).wav&#39;, &#39;07-11-2025 12.28(6).wav&#39;, &#39;07-11-2025 12.02(5).wav&#39;, &#39;07-11-2025 12.28(2).wav&#39;, &#39;07-11-2025 12.03(8).wav&#39;, &#39;07-11-2025 12.06.wav&#39;, &#39;07-11-2025 12.02(4).wav&#39;, &#39;07-11-2025 12.06(4).wav&#39;, &#39;07-11-2025 12.27(3).wav&#39;, &#39;07-11-2025 12.03(2).wav&#39;, &#39;07-11-2025 12.05(5).wav&#39;, &#39;07-11-2025 12.04(6).wav&#39;, &#39;07-11-2025 12.12(4).wav&#39;, &#39;07-11-2025 12.05(8).wav&#39;, &#39;07-11-2025 12.04(2).wav&#39;, &#39;07-11-2025 12.06(3).wav&#39;, &#39;07-11-2025 12.12(2).wav&#39;, &#39;07-11-2025 12.02(2).wav&#39;, &#39;07-11-2025 12.11(2).wav&#39;, &#39;07-11-2025 12.11(4).wav&#39;, &#39;07-11-2025 12.04(3).wav&#39;, &#39;07-11-2025 12.02(3).wav&#39;, &#39;07-11-2025 12.26(2).wav&#39;, &#39;07-11-2025 12.28.wav&#39;, &#39;07-11-2025 12.06(8).wav&#39;, &#39;07-11-2025 12.12(7).wav&#39;, &#39;07-11-2025 12.25(6).wav&#39;, &#39;07-11-2025 12.11(3).wav&#39;, &#39;07-11-2025 12.25(4).wav&#39;, &#39;07-11-2025 12.02(6).wav&#39;, &#39;07-11-2025 12.28(4).wav&#39;, &#39;07-11-2025 12.12(3).wav&#39;, &#39;07-11-2025 12.07.wav&#39;, &#39;07-11-2025 12.12(5).wav&#39;, &#39;07-11-2025 12.07(2).wav&#39;, &#39;07-11-2025 12.06(5).wav&#39;, &#39;07-11-2025 12.26(4).wav&#39;, &#39;07-11-2025 12.03(9).wav&#39;, &#39;07-11-2025 12.09(3).wav&#39;, &#39;07-11-2025 12.02(10).wav&#39;, &#39;07-11-2025 12.02(9).wav&#39;, &#39;07-11-2025 12.26(3).wav&#39;, &#39;07-11-2025 12.09.wav&#39;, &#39;07-11-2025 12.29.wav&#39;, &#39;07-11-2025 12.03(5).wav&#39;, &#39;07-11-2025 12.10.wav&#39;, &#39;07-11-2025 12.12.wav&#39;, &#39;07-11-2025 12.03(3).wav&#39;, &#39;07-11-2025 12.27(2).wav&#39;]
--------------------------------------------------
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">os</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">librosa</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">glob</span><span class="w"> </span><span class="kn">import</span> <span class="n">glob</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">tqdm</span><span class="w"> </span><span class="kn">import</span> <span class="n">tqdm</span>


<span class="c1"># ============================</span>
<span class="c1"># 1. SET PATH DATA (SESUAI ZIP)</span>
<span class="c1"># ============================</span>

<span class="n">BASE</span> <span class="o">=</span> <span class="s2">&quot;rekamsuara/user1&quot;</span>   <span class="c1"># hasil ekstraksi ZIP kamu</span>

<span class="n">OLD_DIRS</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;buka&quot;</span><span class="p">:</span>  <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">BASE</span><span class="p">,</span> <span class="s2">&quot;buka&quot;</span><span class="p">),</span>
    <span class="s2">&quot;tutup&quot;</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">BASE</span><span class="p">,</span> <span class="s2">&quot;tutup&quot;</span><span class="p">),</span>
<span class="p">}</span>

<span class="c1"># File baru bisa ditambahkan nanti kalau ada</span>
<span class="n">NEW_FILES</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c1"># contoh bila ingin menambah:</span>
    <span class="c1"># &quot;buka_baru&quot;: &quot;buka_baru.wav&quot;,</span>
    <span class="c1"># &quot;tutup_baru&quot;: &quot;tutup_baru.wav&quot;</span>
<span class="p">}</span>


<span class="c1"># ============================</span>
<span class="c1"># 2. FUNGSI EXTRACT MFCC</span>
<span class="c1"># ============================</span>

<span class="n">SR</span> <span class="o">=</span> <span class="mi">16000</span>
<span class="n">N_MFCC</span> <span class="o">=</span> <span class="mi">20</span>

<span class="k">def</span><span class="w"> </span><span class="nf">extract_mfcc</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">SR</span><span class="p">,</span> <span class="n">n_mfcc</span><span class="o">=</span><span class="n">N_MFCC</span><span class="p">):</span>
    <span class="n">y</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">,</span> <span class="n">mono</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">mfcc</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">feature</span><span class="o">.</span><span class="n">mfcc</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">,</span> <span class="n">n_mfcc</span><span class="o">=</span><span class="n">n_mfcc</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">mfcc</span>


<span class="c1"># ============================</span>
<span class="c1"># 3. COLLECT FILE DATA LAMA</span>
<span class="c1"># ============================</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Mengumpulkan daftar file data lama...</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="n">old_files</span> <span class="o">=</span> <span class="p">{}</span>
<span class="k">for</span> <span class="n">label</span><span class="p">,</span> <span class="n">folder</span> <span class="ow">in</span> <span class="n">OLD_DIRS</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">folder</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Folder tidak ditemukan: </span><span class="si">{</span><span class="n">folder</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="n">pattern</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="s2">&quot;*.wav&quot;</span><span class="p">)</span>
    <span class="n">files</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">glob</span><span class="p">(</span><span class="n">pattern</span><span class="p">))</span>

    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">label</span><span class="si">}</span><span class="s2">  </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">files</span><span class="p">)</span><span class="si">}</span><span class="s2"> file ditemukan&quot;</span><span class="p">)</span>
    <span class="n">old_files</span><span class="p">[</span><span class="n">label</span><span class="p">]</span> <span class="o">=</span> <span class="n">files</span>


<span class="c1"># ============================</span>
<span class="c1"># 4. EKSTRAK MFCC DATA LAMA</span>
<span class="c1"># ============================</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Ekstrak MFCC untuk data lama...</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="n">old_mfcc</span> <span class="o">=</span> <span class="p">{}</span>
<span class="k">for</span> <span class="n">label</span><span class="p">,</span> <span class="n">files</span> <span class="ow">in</span> <span class="n">old_files</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="n">old_mfcc</span><span class="p">[</span><span class="n">label</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">tqdm</span><span class="p">(</span><span class="n">files</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;MFCC </span><span class="si">{</span><span class="n">label</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">):</span>
        <span class="n">old_mfcc</span><span class="p">[</span><span class="n">label</span><span class="p">][</span><span class="n">f</span><span class="p">]</span> <span class="o">=</span> <span class="n">extract_mfcc</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>


<span class="c1"># ============================</span>
<span class="c1"># 5. EKSTRAK MFCC UNTUK FILE BARU (opsional)</span>
<span class="c1"># ============================</span>

<span class="n">new_mfcc</span> <span class="o">=</span> <span class="p">{}</span>

<span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">NEW_FILES</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Ekstrak MFCC untuk file baru...</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">path</span> <span class="ow">in</span> <span class="n">NEW_FILES</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;File baru tidak ditemukan: </span><span class="si">{</span><span class="n">path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">new_mfcc</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">extract_mfcc</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>


<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">SELESAI! MFCC berhasil diekstrak.&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Mengumpulkan daftar file data lama...

buka  100 file ditemukan
tutup  100 file ditemukan

Ekstrak MFCC untuk data lama...
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>MFCC buka: 100%|| 100/100 [00:21&lt;00:00,  4.56it/s]
MFCC tutup: 100%|| 100/100 [00:01&lt;00:00, 83.06it/s]
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>SELESAI! MFCC berhasil diekstrak.
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
</div>
</div>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="proses-perhitungan-dtw-untuk-membandingkan-rekaman-baru-dan-lama">
<h1>Proses Perhitungan DTW untuk Membandingkan Rekaman Baru dan Lama<a class="headerlink" href="#proses-perhitungan-dtw-untuk-membandingkan-rekaman-baru-dan-lama" title="Link to this heading">#</a></h1>
<p>Bagian kode ini berfungsi menghitung tingkat kemiripan antara rekaman audio baru dan rekaman lama menggunakan algoritma Dynamic Time Warping (DTW), lalu menyimpan seluruh hasilnya dalam file CSV. Pertama, list rows disiapkan sebagai wadah penyimpanan hasil perhitungan. Program kemudian melakukan iterasi pada setiap MFCC rekaman baru (new_mfcc) dan membandingkannya dengan semua rekaman lama berdasarkan label kategorinya. Untuk setiap pasangan data, MFCC dari rekaman lama diambil dan fungsi dtw_distance digunakan untuk menghitung nilai jarak, meliputi raw_cost (biaya total DTW), normalized_cost (biaya yang telah dinormalisasi berdasarkan panjang lintasan), serta path_len (jumlah langkah dalam lintasan optimal). Hasil dari tiap perbandingan dicatat dalam bentuk dictionary dan ditambahkan ke dalam list rows. Setelah seluruh proses selesai, data tersebut diubah menjadi DataFrame pandas dan disimpan ke file CSV melalui variabel OUT_CSV, sehingga hasil analisis dapat diproses atau divisualisasikan pada tahap berikutnya.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">rows</span> <span class="o">=</span> <span class="p">[]</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Menghitung DTW...&quot;</span><span class="p">)</span>

<span class="c1"># Loop MFCC file baru</span>
<span class="k">for</span> <span class="n">new_name</span><span class="p">,</span> <span class="n">new_feat</span> <span class="ow">in</span> <span class="n">new_mfcc</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>

    <span class="c1"># Loop semua label lama</span>
    <span class="k">for</span> <span class="n">label</span><span class="p">,</span> <span class="n">file_list</span> <span class="ow">in</span> <span class="n">old_files</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>

        <span class="c1"># Loop setiap file lama dalam label tersebut</span>
        <span class="k">for</span> <span class="n">old_path</span> <span class="ow">in</span> <span class="n">tqdm</span><span class="p">(</span><span class="n">file_list</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;DTW </span><span class="si">{</span><span class="n">new_name</span><span class="si">}</span><span class="s2"> vs </span><span class="si">{</span><span class="n">label</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">leave</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>

            <span class="c1"># Ambil MFCC lama (key = path lengkap)</span>
            <span class="n">m_old</span> <span class="o">=</span> <span class="n">old_mfcc</span><span class="p">[</span><span class="n">label</span><span class="p">][</span><span class="n">old_path</span><span class="p">]</span>

            <span class="c1"># Hitung DTW</span>
            <span class="n">raw_cost</span><span class="p">,</span> <span class="n">norm_cost</span><span class="p">,</span> <span class="n">path_len</span> <span class="o">=</span> <span class="n">dtw_distance</span><span class="p">(</span><span class="n">m_old</span><span class="p">,</span> <span class="n">new_feat</span><span class="p">)</span>

            <span class="c1"># Simpan hasil</span>
            <span class="n">rows</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
                <span class="s1">&#39;new_file&#39;</span><span class="p">:</span> <span class="n">new_name</span><span class="p">,</span>
                <span class="s1">&#39;old_label&#39;</span><span class="p">:</span> <span class="n">label</span><span class="p">,</span>
                <span class="s1">&#39;old_path&#39;</span><span class="p">:</span> <span class="n">old_path</span><span class="p">,</span>
                <span class="s1">&#39;raw_cost&#39;</span><span class="p">:</span> <span class="n">raw_cost</span><span class="p">,</span>
                <span class="s1">&#39;normalized_cost&#39;</span><span class="p">:</span> <span class="n">norm_cost</span><span class="p">,</span>
                <span class="s1">&#39;path_len&#39;</span><span class="p">:</span> <span class="n">path_len</span>
            <span class="p">})</span>

<span class="c1"># Simpan ke CSV</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">rows</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">OUT_CSV</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Hasil tersimpan ke </span><span class="si">{</span><span class="n">OUT_CSV</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Menghitung DTW...
Hasil tersimpan ke dtw_results.csv
</pre></div>
</div>
</div>
</div>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="analisis-kemiripan-rekaman-baru-terhadap-data-lama">
<h1>Analisis Kemiripan Rekaman Baru terhadap Data Lama<a class="headerlink" href="#analisis-kemiripan-rekaman-baru-terhadap-data-lama" title="Link to this heading">#</a></h1>
<p>Bagian kode ini menjalankan proses otomatis untuk mengukur tingkat kemiripan antara rekaman suara baru dan kumpulan rekaman lama dengan memanfaatkan fitur MFCC serta metode Dynamic Time Warping (DTW). Pada tahap awal, direktori utama beserta folder data lama (buka dan tutup) ditentukan, kemudian masing-masing kategori dipilih satu contoh file sebagai data baru (NEW_FILES). Fungsi extract_mfcc digunakan untuk menghasilkan representasi MFCC dari setiap audio, sedangkan dtw_distance menghitung jarak DTW antara MFCC rekaman lama dan baru. Program memuat seluruh file lama, mengekstraksi MFCC-nya, dan melakukan hal yang sama untuk file baru. Setelah itu, setiap rekaman baru dibandingkan dengan semua rekaman lama, dan hasil berupa nilai normalized_cost dicatat dalam DataFrame df serta diekspor ke file CSV. Pada tahap akhir, kode menampilkan lima rekaman lama dengan nilai kesamaan tertinggi untuk setiap rekaman baru, sehingga mempermudah proses identifikasi kemiripan suara.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">os</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">librosa</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">glob</span><span class="w"> </span><span class="kn">import</span> <span class="n">glob</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">tqdm</span><span class="w"> </span><span class="kn">import</span> <span class="n">tqdm</span>

<span class="n">BASE</span> <span class="o">=</span> <span class="s2">&quot;rekamsuara/user1&quot;</span>

<span class="n">OLD_DIRS</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;buka&quot;</span><span class="p">:</span>  <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">BASE</span><span class="p">,</span> <span class="s2">&quot;buka&quot;</span><span class="p">),</span>
    <span class="s2">&quot;tutup&quot;</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">BASE</span><span class="p">,</span> <span class="s2">&quot;tutup&quot;</span><span class="p">),</span>
<span class="p">}</span>



<span class="n">buka_files</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">glob</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">OLD_DIRS</span><span class="p">[</span><span class="s2">&quot;buka&quot;</span><span class="p">],</span> <span class="s2">&quot;*.wav&quot;</span><span class="p">)))</span>
<span class="n">tutup_files</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">glob</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">OLD_DIRS</span><span class="p">[</span><span class="s2">&quot;tutup&quot;</span><span class="p">],</span> <span class="s2">&quot;*.wav&quot;</span><span class="p">)))</span>

<span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">buka_files</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">tutup_files</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
    <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span><span class="s2">&quot;Folder buka/tutup kosong!&quot;</span><span class="p">)</span>

<span class="n">NEW_FILES</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;buka_baru&quot;</span><span class="p">:</span> <span class="n">buka_files</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
    <span class="s2">&quot;tutup_baru&quot;</span><span class="p">:</span> <span class="n">tutup_files</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
<span class="p">}</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;File baru otomatis dipilih:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">NEW_FILES</span><span class="p">)</span>



<span class="n">SR</span> <span class="o">=</span> <span class="mi">16000</span>
<span class="n">N_MFCC</span> <span class="o">=</span> <span class="mi">20</span>

<span class="k">def</span><span class="w"> </span><span class="nf">extract_mfcc</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">SR</span><span class="p">,</span> <span class="n">n_mfcc</span><span class="o">=</span><span class="n">N_MFCC</span><span class="p">):</span>
    <span class="n">y</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">,</span> <span class="n">mono</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">mfcc</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">feature</span><span class="o">.</span><span class="n">mfcc</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">,</span> <span class="n">n_mfcc</span><span class="o">=</span><span class="n">n_mfcc</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">mfcc</span>

<span class="k">def</span><span class="w"> </span><span class="nf">dtw_distance</span><span class="p">(</span><span class="n">m1</span><span class="p">,</span> <span class="n">m2</span><span class="p">):</span>
    <span class="n">D</span><span class="p">,</span> <span class="n">wp</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">sequence</span><span class="o">.</span><span class="n">dtw</span><span class="p">(</span><span class="n">X</span><span class="o">=</span><span class="n">m1</span><span class="p">,</span> <span class="n">Y</span><span class="o">=</span><span class="n">m2</span><span class="p">,</span> <span class="n">metric</span><span class="o">=</span><span class="s1">&#39;euclidean&#39;</span><span class="p">)</span>
    <span class="n">raw</span> <span class="o">=</span> <span class="n">D</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">norm</span> <span class="o">=</span> <span class="n">raw</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">wp</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">raw</span><span class="p">,</span> <span class="n">norm</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">wp</span><span class="p">)</span>



<span class="n">old_files</span> <span class="o">=</span> <span class="p">{}</span>
<span class="k">for</span> <span class="n">label</span><span class="p">,</span> <span class="n">folder</span> <span class="ow">in</span> <span class="n">OLD_DIRS</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="n">files</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">glob</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="s2">&quot;*.wav&quot;</span><span class="p">)))</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">label</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">files</span><span class="p">)</span><span class="si">}</span><span class="s2"> file ditemukan&quot;</span><span class="p">)</span>
    <span class="n">old_files</span><span class="p">[</span><span class="n">label</span><span class="p">]</span> <span class="o">=</span> <span class="n">files</span>


<span class="n">old_mfcc</span> <span class="o">=</span> <span class="p">{}</span>
<span class="k">for</span> <span class="n">label</span><span class="p">,</span> <span class="n">files</span> <span class="ow">in</span> <span class="n">old_files</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="n">old_mfcc</span><span class="p">[</span><span class="n">label</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">tqdm</span><span class="p">(</span><span class="n">files</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;MFCC </span><span class="si">{</span><span class="n">label</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">):</span>
        <span class="n">old_mfcc</span><span class="p">[</span><span class="n">label</span><span class="p">][</span><span class="n">f</span><span class="p">]</span> <span class="o">=</span> <span class="n">extract_mfcc</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>



<span class="n">new_mfcc</span> <span class="o">=</span> <span class="p">{}</span>
<span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">path</span> <span class="ow">in</span> <span class="n">NEW_FILES</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="n">new_mfcc</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">extract_mfcc</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>


<span class="n">rows</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">for</span> <span class="n">new_name</span><span class="p">,</span> <span class="n">new_feat</span> <span class="ow">in</span> <span class="n">new_mfcc</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="k">for</span> <span class="n">label</span><span class="p">,</span> <span class="n">files</span> <span class="ow">in</span> <span class="n">old_files</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">tqdm</span><span class="p">(</span><span class="n">files</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;DTW </span><span class="si">{</span><span class="n">new_name</span><span class="si">}</span><span class="s2"> vs </span><span class="si">{</span><span class="n">label</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">leave</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
            <span class="n">m_old</span> <span class="o">=</span> <span class="n">old_mfcc</span><span class="p">[</span><span class="n">label</span><span class="p">][</span><span class="n">f</span><span class="p">]</span>
            <span class="n">raw</span><span class="p">,</span> <span class="n">norm</span><span class="p">,</span> <span class="n">plen</span> <span class="o">=</span> <span class="n">dtw_distance</span><span class="p">(</span><span class="n">m_old</span><span class="p">,</span> <span class="n">new_feat</span><span class="p">)</span>
            <span class="n">rows</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
                <span class="s1">&#39;new_file&#39;</span><span class="p">:</span> <span class="n">new_name</span><span class="p">,</span>
                <span class="s1">&#39;old_label&#39;</span><span class="p">:</span> <span class="n">label</span><span class="p">,</span>
                <span class="s1">&#39;old_path&#39;</span><span class="p">:</span> <span class="n">f</span><span class="p">,</span>
                <span class="s1">&#39;normalized_cost&#39;</span><span class="p">:</span> <span class="n">norm</span><span class="p">,</span>
            <span class="p">})</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">rows</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s2">&quot;dtw_results.csv&quot;</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Top 5 file paling mirip untuk setiap file baru:&quot;</span><span class="p">)</span>

<span class="k">for</span> <span class="n">new_name</span> <span class="ow">in</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;new_file&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">():</span>
    <span class="n">sub</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;new_file&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">new_name</span><span class="p">]</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;normalized_cost&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">== </span><span class="si">{</span><span class="n">new_name</span><span class="si">}</span><span class="s2"> ==&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">sub</span><span class="p">[[</span><span class="s1">&#39;old_label&#39;</span><span class="p">,</span><span class="s1">&#39;old_path&#39;</span><span class="p">,</span><span class="s1">&#39;normalized_cost&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="o">.</span><span class="n">to_string</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>File baru otomatis dipilih:
{&#39;buka_baru&#39;: &#39;rekamsuara/user1/buka/07-11-2025 11.46(2).wav&#39;, &#39;tutup_baru&#39;: &#39;rekamsuara/user1/tutup/07-11-2025 12.02(10).wav&#39;}
buka: 100 file ditemukan
tutup: 100 file ditemukan
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>MFCC buka: 100%|| 100/100 [00:01&lt;00:00, 77.61it/s]
MFCC tutup: 100%|| 100/100 [00:01&lt;00:00, 81.74it/s]
                                                                
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Top 5 file paling mirip untuk setiap file baru:

== buka_baru ==
old_label                                      old_path  normalized_cost
     buka rekamsuara/user1/buka/07-11-2025 11.46(2).wav         0.000000
     buka    rekamsuara/user1/buka/07-11-2025 11.49.wav        58.324885
     buka rekamsuara/user1/buka/07-11-2025 11.50(7).wav        63.162512
     buka rekamsuara/user1/buka/07-11-2025 11.46(3).wav        66.997748
     buka        rekamsuara/user1/buka/Jum 11.47(3).wav        67.682197

== tutup_baru ==
old_label                                        old_path  normalized_cost
    tutup rekamsuara/user1/tutup/07-11-2025 12.02(10).wav         0.000000
    tutup  rekamsuara/user1/tutup/07-11-2025 12.02(8).wav        58.667057
    tutup  rekamsuara/user1/tutup/07-11-2025 12.04(2).wav        62.089834
    tutup     rekamsuara/user1/tutup/07-11-2025 12.02.wav        63.039265
    tutup  rekamsuara/user1/tutup/07-11-2025 12.05(7).wav        63.559290
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
</div>
</div>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="visualisasi-hasil-analisis-dtw">
<h1>Visualisasi Hasil Analisis DTW<a class="headerlink" href="#visualisasi-hasil-analisis-dtw" title="Link to this heading">#</a></h1>
<p>Bagian kode ini digunakan untuk menampilkan berbagai visualisasi dari hasil perhitungan DTW guna memahami pola kemiripan rekaman suara. Pertama, dibuat diagram batang yang menunjukkan nilai rata-rata normalized_cost untuk setiap label rekaman lama, sehingga terlihat kategori mana yang cenderung paling mirip dengan rekaman baru. Selanjutnya, histogram digunakan untuk menggambarkan distribusi nilai normalized_cost pada setiap label, memberikan gambaran mengenai keragaman dan sebaran tingkat kemiripan antar file. Visualisasi berikutnya berupa scatter plot, yang menampilkan seluruh nilai normalized_cost secara berurutan sehingga memudahkan identifikasi file-file dengan tingkat kemiripan tertinggi. Terakhir, kode menghasilkan tampilan warp path DTW untuk file lama terbaik, yaitu dengan melakukan DTW terhadap MFCC file tersebut sendiri. Hasilnya berupa matriks biaya dan jalur penyelarasan optimal, yang membantu memberikan pemahaman visual mengenai bagaimana pola waktu dalam sinyal saling disejajarkan.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Menyiapkan visualisasi...&quot;</span><span class="p">)</span>

<span class="c1"># Pastikan df punya kolom: old_label, normalized_cost</span>
<span class="n">summary</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;old_label&#39;</span><span class="p">])[</span><span class="s1">&#39;normalized_cost&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>

<span class="c1"># =============================</span>
<span class="c1"># 1. Barplot rata-rata cost per label lama</span>
<span class="c1"># =============================</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span><span class="mi">4</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">summary</span><span class="p">[</span><span class="s1">&#39;old_label&#39;</span><span class="p">],</span> <span class="n">summary</span><span class="p">[</span><span class="s1">&#39;normalized_cost&#39;</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Rata-rata Normalized DTW Cost per Label Lama&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Normalized DTW Cost (Lower = Better)&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Label Lama&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;--&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="c1"># =============================</span>
<span class="c1"># 2. Histogram distribusi cost per label</span>
<span class="c1"># =============================</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">4</span><span class="p">))</span>

<span class="k">for</span> <span class="n">label</span> <span class="ow">in</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;old_label&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">():</span>
    <span class="n">subset</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;old_label&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">label</span><span class="p">][</span><span class="s1">&#39;normalized_cost&#39;</span><span class="p">]</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">subset</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">label</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Distribusi Normalized DTW Cost per Label Lama&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Normalized DTW Cost&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Frequency&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;--&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="c1"># =============================</span>
<span class="c1"># 3. Scatter Plot cost seluruh file</span>
<span class="c1"># =============================</span>
<span class="n">df_sorted</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;normalized_cost&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span><span class="mi">4</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">df_sorted</span><span class="p">)),</span> <span class="n">df_sorted</span><span class="p">[</span><span class="s1">&#39;normalized_cost&#39;</span><span class="p">],</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.6</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Scatter Plot Normalized DTW Cost&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Index File (Old Files)&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Normalized DTW Cost&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;--&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="c1"># =============================</span>
<span class="c1"># 4. Visualisasi DTW Alignment (File Baru vs File Lama Terbaik)</span>
<span class="c1"># =============================</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Visualisasi Warp Path (DTW Alignment) untuk file terbaik:&quot;</span><span class="p">)</span>

<span class="c1"># Ambil baris terbaik</span>
<span class="n">best_match</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;normalized_cost&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">best_old_file</span> <span class="o">=</span> <span class="n">best_match</span><span class="p">[</span><span class="s1">&#39;old_path&#39;</span><span class="p">]</span>
<span class="n">best_old_label</span> <span class="o">=</span> <span class="n">best_match</span><span class="p">[</span><span class="s1">&#39;old_label&#39;</span><span class="p">]</span>
<span class="n">new_name</span> <span class="o">=</span> <span class="n">best_match</span><span class="p">[</span><span class="s1">&#39;new_file&#39;</span><span class="p">]</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;File baru     : </span><span class="si">{</span><span class="n">new_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;File lama best: </span><span class="si">{</span><span class="n">best_old_file</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># Ambil MFCC lama &amp; baru</span>
<span class="n">m_old</span> <span class="o">=</span> <span class="n">old_mfcc</span><span class="p">[</span><span class="n">best_old_label</span><span class="p">][</span><span class="n">best_old_file</span><span class="p">]</span>
<span class="n">m_new</span> <span class="o">=</span> <span class="n">new_mfcc</span><span class="p">[</span><span class="n">new_name</span><span class="p">]</span>

<span class="c1"># Hitung DTW</span>
<span class="n">D</span><span class="p">,</span> <span class="n">wp</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">sequence</span><span class="o">.</span><span class="n">dtw</span><span class="p">(</span><span class="n">X</span><span class="o">=</span><span class="n">m_old</span><span class="p">,</span> <span class="n">Y</span><span class="o">=</span><span class="n">m_new</span><span class="p">,</span> <span class="n">metric</span><span class="o">=</span><span class="s1">&#39;euclidean&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span><span class="mi">6</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">D</span><span class="o">.</span><span class="n">T</span><span class="p">,</span> <span class="n">origin</span><span class="o">=</span><span class="s1">&#39;lower&#39;</span><span class="p">,</span> <span class="n">aspect</span><span class="o">=</span><span class="s1">&#39;auto&#39;</span><span class="p">,</span> <span class="n">interpolation</span><span class="o">=</span><span class="s1">&#39;nearest&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">([</span><span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">wp</span><span class="p">],</span> <span class="p">[</span><span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">wp</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;yellow&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;DTW Cost Matrix &amp; Warp Path</span><span class="se">\n</span><span class="si">{</span><span class="n">new_name</span><span class="si">}</span><span class="s2">  </span><span class="si">{</span><span class="n">best_old_file</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Index MFCC Lama&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Index MFCC Baru&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Menyiapkan visualisasi...
</pre></div>
</div>
<img alt="_images/96548a337e2d70c188aaacb774b168470d067956922dc7ee4aca2e2b145a99b7.png" src="_images/96548a337e2d70c188aaacb774b168470d067956922dc7ee4aca2e2b145a99b7.png" />
<img alt="_images/1798908aea7c1ba5d679043c3839b5ad421ff5a8d57857f51a430d388a78489d.png" src="_images/1798908aea7c1ba5d679043c3839b5ad421ff5a8d57857f51a430d388a78489d.png" />
<img alt="_images/6923fdd7d554e4531778308537bd8cf2badbe1a8ff298167f4ce91406e9954ec.png" src="_images/6923fdd7d554e4531778308537bd8cf2badbe1a8ff298167f4ce91406e9954ec.png" />
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Visualisasi Warp Path (DTW Alignment) untuk file terbaik:
File baru     : tutup_baru
File lama best: rekamsuara/user1/tutup/07-11-2025 12.02(10).wav
</pre></div>
</div>
<img alt="_images/1f37cd5214f69c0f5932350e8acb6a415d0752770bf5c1c19f66eb726e3daa99.png" src="_images/1f37cd5214f69c0f5932350e8acb6a415d0752770bf5c1c19f66eb726e3daa99.png" />
</div>
</div>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="voicepredict.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Membaca dataset suara</p>
      </div>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">Dynamic Time Wrapping</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#inisialisasi-konfigurasi-untuk-perhitungan-dtw-pada-rekaman-audio">Inisialisasi Konfigurasi untuk Perhitungan DTW pada Rekaman Audio</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#fungsi-ekstraksi-mfcc-dan-perhitungan-dtw">Fungsi Ekstraksi MFCC dan Perhitungan DTW</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#pengumpulan-dan-persiapan-data-rekaman-lama">Pengumpulan dan Persiapan Data Rekaman Lama</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#proses-perhitungan-dtw-untuk-membandingkan-rekaman-baru-dan-lama">Proses Perhitungan DTW untuk Membandingkan Rekaman Baru dan Lama</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#analisis-kemiripan-rekaman-baru-terhadap-data-lama">Analisis Kemiripan Rekaman Baru terhadap Data Lama</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#visualisasi-hasil-analisis-dtw">Visualisasi Hasil Analisis DTW</a></li>
</ul>

  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Nuril Anjar Royani
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
       Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>